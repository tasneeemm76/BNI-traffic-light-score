{% load static %}
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>BNI Monthly Reports</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        table { width: 100%; border-collapse: collapse; }
        th, td { padding: 8px 10px; border: 1px solid #ddd; text-align: left; }
        th { background: #f6f6f6; }
        .filters { margin-bottom: 16px; display: flex; gap: 8px; align-items: center; }
        .back { margin-top: 12px; display: inline-block; }
    </style>
</head>
<body>
    <h1>BNI Monthly Reports</h1>

    <p><strong>Total records:</strong> {{ records_count }}</p>

    <form class="filters" method="get">
        <label>
            Year
            <input type="number" name="year" value="{{ filter_year }}" min="2000" max="2100" />
        </label>
        <label>
            Month
            <input type="number" name="month" value="{{ filter_month }}" min="1" max="12" />
        </label>
        <button type="submit">Filter</button>
        <a href="?">Clear</a>
    </form>

    <table>
        <thead>
            <tr>
                <th>Year</th>
                <th>Month</th>
                <th>Member</th>
                <th>P</th>
                <th>A</th>
                <th>L</th>
                <th>M</th>
                <th>S</th>
                <th>RGI</th>
                <th>RGO</th>
                <th>RRI</th>
                <th>RRO</th>
                <th>V</th>
                <th>1-2-1</th>
                <th>TYFCB</th>
                <th>CEU</th>
                <th>T</th>
                <th>Total Score</th>
                <th>Color</th>
            </tr>
        </thead>
        <tbody>
            {% for r in reports %}
            <tr>
                <td>{{ r.period.year }}</td>
                <td>{{ r.period.month }}</td>
                <td>{{ r.member.first_name }} {{ r.member.last_name }}</td>
                <td>{{ r.P }}</td>
                <td>{{ r.A }}</td>
                <td>{{ r.L }}</td>
                <td>{{ r.M }}</td>
                <td>{{ r.S }}</td>
                <td>{{ r.RGI }}</td>
                <td>{{ r.RGO }}</td>
                <td>{{ r.RRI }}</td>
                <td>{{ r.RRO }}</td>
                <td>{{ r.V }}</td>
                <td>{{ r.one_to_one }}</td>
                <td>{{ r.TYFCB }}</td>
                <td>{{ r.CEU }}</td>
                <td>{{ r.T }}</td>
                <td>{{ r.total_score }}</td>
                <td>{{ r.color }}</td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="19">No reports found.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <a class="back" href="{% url 'upload_excel' %}">Back to upload</a>
    <form method="POST" action="{% url 'delete_all_reports' %}" onsubmit="return confirm('Are you sure you want to delete ALL reports, members, and periods?');">
  {% csrf_token %}
  <button type="submit" style="background-color:#b30000;color:white;padding:8px 14px;border:none;border-radius:6px;cursor:pointer;">
    ðŸ—‘ Delete All Records
  </button>
</form>

</body>
</html>
